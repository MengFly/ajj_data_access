<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.akxy.mapper.AreaDataInfoMapper" >
  <resultMap id="BaseResultMap" type="com.akxy.entity.AreaDataInfo" >
    <result column="AREA_ID" property="areaId" jdbcType="DECIMAL" />
    <result column="ACQUISITION_TIME" property="acquisitionTime" jdbcType="TIMESTAMP" />
    <result column="AREA_VALUE" property="areaValue" jdbcType="DECIMAL" />
    <result column="AREA_LEVEL" property="areaLevel" jdbcType="VARCHAR" />
    <result column="STRESS_VALUE" property="stressValue" jdbcType="DECIMAL" />
    <result column="QUAKE_VALUE" property="quakeValue" jdbcType="DECIMAL" />
    <result column="MEMO" property="memo" jdbcType="VARCHAR" />
  </resultMap>
  <insert id="insert" parameterType="com.akxy.entity.AreaDataInfo" >
    insert into AREA_DATA_INFO (AREA_ID, ACQUISITION_TIME, AREA_VALUE, 
      AREA_LEVEL, STRESS_VALUE, QUAKE_VALUE, 
      MEMO)
    values (#{areaId,jdbcType=DECIMAL}, #{acquisitionTime,jdbcType=TIMESTAMP}, #{areaValue,jdbcType=DECIMAL}, 
      #{areaLevel,jdbcType=OTHER}, #{stressValue,jdbcType=DECIMAL}, #{quakeValue,jdbcType=DECIMAL}, 
      #{memo,jdbcType=OTHER})
  </insert>

	<!-- 批量插入AREA_DATA_INFO -->
	<insert id="insertGroupData" parameterType="java.util.List">
		insert into AREA_DATA_INFO (AREA_ID, ACQUISITION_TIME, AREA_VALUE,
		AREA_LEVEL, STRESS_VALUE, QUAKE_VALUE,MEMO)
		<foreach collection="list" item="item" index="index" open="("
			separator="union" close=")">
			SELECT
			#{item.areaId,jdbcType = DECIMAL},
			#{item.acquisitionTime,jdbcType = TIMESTAMP},
			#{item.areaValue,jdbcType = DECIMAL}, 
			#{item.areaLevel,jdbcType = VARCHAR},
			#{item.stressValue,jdbcType = DECIMAL},
			#{item.quakeValue,jdbcType = DECIMAL},
			#{item.memo,jdbcType = VARCHAR}
			FROM
			dual
		</foreach>
	</insert>
	
	<!-- 依据AreaId查询Top数据 -->
	<select id="getDataById" resultMap="BaseResultMap">
		SELECT * FROM AREA_DATA_INFO WHERE AREA_ID=#{areaId,jdbcType = DECIMAL}
		AND ROWNUM=1 ORDER BY ACQUISITION_TIME DESC
	</select>
	
  
</mapper>